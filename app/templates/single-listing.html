{% extends 'base.html'%}

{% block navbar %}
    {% include 'navbar2.html' %}
{% endblock %}

{% import 'bootstrap/wtf.html' as wtf%}

<!-- Content block -->
{% block content %}

    <title> {{ title }} </title>
<div class="container listing-container">
    <div class="row">

        <div class="col-sm-6 listing-details listing-col">
            <div class="row listing-header">
                <h1>{{ listing.title }}</h1>
            </div>
            <p> <i class="fa fa-map-marker-alt" style="padding-right:6px"></i>{{ listing.location }}</p>

            <h4>Property Details</h4>
            <hr>
            <p> <span style="padding-right:50px">Location</span> {{ listing.location | capitalize}}</p>
            <p> <span style="padding-right:84px">Size</span> {{ listing.bedrooms | capitalize}}</p>
            <p> <span style="padding-right:77px">Price</span> {{ listing.pricing}}</p>
            <p> <span style="padding-right:47px">Category</span> {{ listing.category}}</p>
            <h4 style="margin-top:30px">Description</h4>
            <hr>
            <div>{{ listing.description}}</div>

            <h4 style="margin-top:50px">Book Viewing</h4>

            <table class="table table-striped">
                <thead>
                    <tr>
                        <th scope='col'>Date</th>
                        <th scope='col'>From</th>
                        <th scope='col'>To</th>
                        <th scope='col'>Book</th>
                    </tr>
                </thead>
                <tbody>
                    {% if timeslots%}
                        {% for timeslot in timeslots%}
                            <tr>
                                <td>{{timeslot.date}}</td>
                                <td>{{timeslot.start_time}}</td>
                                <td>{{timeslot.end_time}}</td>
                                <td> <a class="btn btn-book btn-sm"  href="/listing/{{listing.id}}/book/{{timeslot.id}}">BOOK TO VIEW</a></td>
                            </tr>
                        {% endfor %}
                    {% endif %}
                </tbody>
            </table>
        </div>

        <div class="offset-1 col-sm-5">

            <div id="carouselExampleSlides" class="carousel slide" data-ride="carousel">
              <div class="carousel-inner">
                <div class="carousel-item active">
                  <img class="d-block w-100" src="{{url_for('static',filename = listing.featured_pic_path)}}" style="height:300px" alt="Front view">
                </div>
                <div class="carousel-item">
                  <img class="d-block w-100" src="../static/listing_images/house_hunt.jpg" style="height:300px"  alt="Side view">
                </div>
                  <a class="carousel-control-prev" href="#carouselExampleSlides" role="button" style="height:300px" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                  </a>
                  <a class="carousel-control-next" href="#carouselExampleSlides" role="button" style="height:300px"  data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                  </a>
              </div>
            </div>
            <h4 style="margin-top:30px">Agent Details</h4>
            <hr>
            <div class="row">

                <div class="col-md-6">

                    {% if user.profile_pic_path %}
                    <img src="{{url_for('static',filename = user.profile_pic_path)}}" alt="" class="img-thumbnail rounded-circle">
                    {% else %}
                    <img src="{{url_for('static',filename = 'photos/avatar.jpg')}}" alt="" class="img-thumbnail rounded-circle">
                    {% endif %}
                </div>
                <div class="col-md-6">
                    <p>{{ listing.user.username }}</p>
                    <p>email:</p><p>{{ listing.user.email}}</p>
                    <p>contact:</p><p>{{ listing.user.contact }}</p>
                </div>
            </div>
            <p style="margin-top:30px"> <p>Biography</p> {{ listing.user.bio }}</p>


        </div>


    </div>

    <div class="modal fade" id="bookingModal" tabindex="-1" role="dialog" aria-labelledby="bookingModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="bookingModalLabel">Booking Form</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Save changes</button>
          </div>
        </div>
      </div>
    </div>

</div>


{% endblock %}
